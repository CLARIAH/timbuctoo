<!DOCTYPE html>
<html lang="en"
      xmlns:c="http://www.concordion.org/2007/concordion"
      xmlns:h="http://huygens.knaw.nl/concordion-http-verifier">
<head>
  <meta charset="UTF-8"/>
  <title>Timbuctoo v2.1 Authentication API</title>
  <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async='async' class='remove'>
    Some content to trick concordion into treating this element as non-empty
  </script>
  <script class='remove'>
        var respecConfig = {
          specStatus: "unofficial",
          editors: [
            {
              name:       "Jauco Noordzij",
              company:    "Huygens ING"
            },
            {
              name:       "Martijn Maas",
              company:    "Huygens ING"
            },
            {
              name:       "Ren√© van der Ark",
              company:    "Huygens ING"
            }
          ],
          issueBase: "http://jira.huygens.knaw.nl/TIM-",
          shortName: "timbuctoov2.1"
        };
  </script>
</head>
<body>
  <section id='abstract'>
    <p>
      This specification describes the workings of the v2.1 version of the Timbuctoo REST API for authentication.
    </p>
  </section>

  <section>
    <h2>Local login</h2>
    <aside class="example" h:http="#authPost">
      <div h:request="">
        POST /v2.1/authenticate HTTP/1.1
        Authorization: Basic dXNlcjpwYXNzd29yZA==

      </div>
      <div h:response="">
        HTTP/1.1 204
        X_AUTH_TOKEN:

      </div>
    </aside>
    You then get a X_AUTH_TOKEN header back (In this case <span c:echo="#authPost.headers.x_auth_token"></span>)
    that you can use to get your own user information.
  </section>
  <section>
    <h2>Get user information</h2>
    <aside class="example" h:http="#userInfoGet">
      <div h:request="">
        GET /v2.1/system/users/me HTTP/1.1
        Authorization: #authPost.headers.x_auth_token
        VRE_ID: WomenWriters
      </div>
      <div h:response="">
        HTTP/1.1 200

        {
          "displayName":"Test User"
        }
      </div>
    </aside>
  </section>

</body>
</html>
